<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Ajax demo 1</title>
</head>
<body>
  <h1>Ajax demo 1</h1>

  <p id="demo"></p>


  <script>
  
  // Skapa ett objekt av typen XMLHttpRequest
  let xhr = new XMLHttpRequest();

  console.log(xhr);

  // Arbeta med onreadystatechange

  /* 
    readyState
    0: request not initialized
    1: server connection established
    2: request received
    3: processing request
    4: request finished and response is ready

    Status
    200 = OK
    404 = Not Found
*/

  xhr.onreadystatechange = function(){

    // console.log(this);  // Det aktuella objektet

    console.log("readyState: " + xhr.readyState);
    console.log("status: " + xhr.status);

    if(this.readyState === 4 && this.status === 200 ){
      console.log("request finished and response is ready");

      document.getElementById('demo').innerHTML = this.responseText;
      
    }

  } 


  // Öppna en request (förfrågan)
  xhr.open('GET', 'demo1.txt' , true);

  // Skicka requesten 
  xhr.send();  



  </script>
</body>
</html>